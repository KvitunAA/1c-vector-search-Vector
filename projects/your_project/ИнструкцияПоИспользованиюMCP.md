# Инструкция для аналитика и пользователя. MCP-сервер 1c-vector-search

MCP-сервер `1c-vector-search` предоставляет инструменты для семантического поиска по конфигурации 1С. Используйте префикс `@1c-vector-search` при работе в Cursor.

---

## Инструменты разработки

### 1. search_1c_code — поиск по коду

**Назначение:** Семантический поиск процедур, функций и фрагментов кода по описанию на естественном языке.

| Параметр      | Тип    | Обязательный | Описание                                      |
|---------------|--------|--------------|-----------------------------------------------|
| query         | string | Да           | Описание искомой функциональности              |
| limit         | int    | Нет (5)      | Количество результатов (1–20)                  |
| only_export   | bool   | Нет (false)  | Искать только экспортные методы                |

**Примеры запросов:**
- «проведение документа реализации»
- «расчёт НДС при поступлении»
- «работа с файлами вложений»

---

### 2. search_1c_metadata — поиск объектов метаданных

**Назначение:** Поиск справочников, документов, регистров и других объектов по названию, синониму или описанию.

| Параметр   | Тип    | Обязательный | Описание                                      |
|------------|--------|--------------|-----------------------------------------------|
| query      | string | Да           | Название или описание объекта                  |
| object_type| string | Нет (Все)    | Фильтр: Справочник, Документ, Регистр и т.д.  |
| limit      | int    | Нет (5)      | Количество результатов (1–20)                  |

---

### 3. search_1c_forms — поиск форм

**Назначение:** Поиск форм 1С по описанию или названию.

| Параметр | Тип    | Обязательный | Описание                    |
|----------|--------|--------------|-----------------------------|
| query    | string | Да           | Описание или название формы |
| limit    | int    | Нет (5)      | Количество результатов     |

---

### 4. find_1c_method_usage — где используется метод

**Назначение:** Поиск мест вызова указанной процедуры или функции в конфигурации.

| Параметр   | Тип    | Обязательный | Описание                    |
|------------|--------|--------------|-----------------------------|
| method_name| string | Да           | Имя процедуры или функции   |
| limit      | int    | Нет (10)     | Максимум результатов (1–50) |

---

### 5. search_by_object_name — информация об объекте

**Назначение:** Получение метаданных и связанного кода по точному имени объекта.

| Параметр    | Тип    | Обязательный | Описание                    |
|-------------|--------|--------------|-----------------------------|
| object_name | string | Да           | Точное имя объекта          |
| include_code| bool   | Нет (true)   | Включать код модулей        |

---

### 6. graph_dependencies — кто ссылается на объект

**Назначение:** Анализ зависимостей — какие объекты используют указанный объект.

| Параметр    | Тип    | Обязательный | Описание                    |
|-------------|--------|--------------|-----------------------------|
| object_name | string | Да           | Имя объекта метаданных      |

---

### 7. graph_references — на что ссылается объект

**Назначение:** Анализ ссылок — какие объекты использует указанный объект.

| Параметр    | Тип    | Обязательный | Описание                    |
|-------------|--------|--------------|-----------------------------|
| object_name | string | Да           | Имя объекта метаданных      |

---

### 8. get_vectordb_stats — статистика индекса

**Назначение:** Количество проиндексированных объектов в векторной БД.

---

### 9. graph_stats — статистика графа

**Назначение:** Количество узлов, рёбер и распределение по типам в графе зависимостей.

---

### 10. get_analyst_instructions — инструкция для аналитика

**Назначение:** Получить полный текст этой инструкции (описание всех инструментов, параметры, примеры, рекомендации).

---

## Рекомендации для аналитика

1. **Перед постановкой задачи разработчику:** используйте `search_1c_metadata` и `search_1c_code` для уточнения, где реализована нужная логика.
2. **При описании доработок:** указывайте точные имена объектов и методов, найденные через MCP.
3. **При проверке конфигурации:** используйте `search_by_object_name` и `find_1c_method_usage` для проверки цепочек вызовов.
