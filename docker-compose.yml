version: '3.8'

services:
  vector-db:
    image: your-vector-db-image:latest # Замените на образ вашей векторной БД (например, qdrant, pgvector и т.п.)
    container_name: vector_db
    restart: unless-stopped
    ports:
      - "9000:9000" # Пример порта для API векторной БД
    volumes:
      - vector_db_data:/var/lib/vector-db
    environment:
      # Все параметры обезличены. Укажите реальные значения в своем окружении.
      - VECTOR_DB_USER=${VECTOR_DB_USER}
      - VECTOR_DB_PASSWORD=${VECTOR_DB_PASSWORD}

  mcp-app:
    image: your-mcp-app-image:latest # Замените на образ MCP-приложения для 1c-vector-search
    container_name: 1c_vector_search_mcp
    restart: unless-stopped
    ports:
      - "8007:8007" # Порт, по которому MCP-сервер будет доступен из Cursor
    volumes:
      # Папка с индексированными данными/артефактами 1С
      - ./data:/app/data
    environment:
      # Настройки подключения к векторной БД
      - VECTOR_DB_URL=${VECTOR_DB_URL}
      - VECTOR_DB_API_KEY=${VECTOR_DB_API_KEY}

      # Имя/идентификатор модели эмбеддингов (обезличенный параметр)
      - EMBEDDING_MODEL_NAME=${EMBEDDING_MODEL_NAME}

      # MCP Transport configuration (use SSE if true, otherwise streamable-http)
      - MCP_USE_SSE=${MCP_USE_SSE:-false}

volumes:
  vector_db_data:
    driver: local

